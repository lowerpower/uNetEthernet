   1               		.file	"emain.c"
   2               		.arch atmega64
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               	.global	bytecopy
  20               	bytecopy:
  21               	.LFB10:
  22               	.LM1:
  23               	/* prologue: frame size=0 */
  24 0000 CF93      		push r28
  25 0002 DF93      		push r29
  26               	/* prologue end (size=2) */
  27               	.LVL0:
  28 0004 9C01      		movw r18,r24
  29               	.LM2:
  30 0006 0097      		sbiw r24,0
  31 0008 01F0      		breq .L2
  32               	.LM3:
  33 000a 6115      		cp r22,__zero_reg__
  34 000c 7105      		cpc r23,__zero_reg__
  35 000e 01F0      		breq .L2
  36 0010 E0E0      		ldi r30,lo8(0)
  37 0012 F0E0      		ldi r31,hi8(0)
  38               	.LVL1:
  39 0014 EC01      		movw r28,r24
  40 0016 DB01      		movw r26,r22
  41 0018 00C0      		rjmp .L5
  42               	.LVL2:
  43               	.L6:
  44               	.LM4:
  45 001a 8D91      		ld r24,X+
  46 001c 8993      		st Y+,r24
  47               	.LM5:
  48 001e 3196      		adiw r30,1
  49               	.LVL3:
  50               	.L5:
  51               	.LM6:
  52 0020 E417      		cp r30,r20
  53 0022 F507      		cpc r31,r21
  54 0024 01F4      		brne .L6
  55               	.LM7:
  56 0026 240F      		add r18,r20
  57 0028 351F      		adc r19,r21
  58               	.LVL4:
  59               	.L2:
  60               	.LM8:
  61 002a C901      		movw r24,r18
  62               	/* epilogue: frame size=0 */
  63 002c DF91      		pop r29
  64 002e CF91      		pop r28
  65 0030 0895      		ret
  66               	/* epilogue end (size=3) */
  67               	/* function bytecopy size 25 (20) */
  68               	.LFE10:
  70               	.global	setup_hw
  72               	setup_hw:
  73               	.LFB11:
  74               	.LM9:
  75               	/* prologue: frame size=0 */
  76               	/* prologue end (size=0) */
  77               	.LM10:
  78 0032 1ABA      		out 58-0x20,__zero_reg__
  79               	.LM11:
  80 0034 89EF      		ldi r24,lo8(-7)
  81 0036 87BB      		out 55-0x20,r24
  82               	.LM12:
  83 0038 8DE0      		ldi r24,lo8(13)
  84 003a 84BB      		out 52-0x20,r24
  85               	.LM13:
  86 003c 11BA      		out 49-0x20,__zero_reg__
  87               	.LM14:
  88 003e 8EE1      		ldi r24,lo8(30)
  89 0040 82B9      		out 34-0x20,r24
  90               	.LM15:
  91 0042 88E0      		ldi r24,lo8(8)
  92 0044 8093 6400 		sts 100,r24
  93               	.LM16:
  94 0048 86E0      		ldi r24,lo8(6)
  95 004a 88BB      		out 56-0x20,r24
  96               	.LM17:
  97 004c 82EF      		ldi r24,lo8(-14)
  98 004e 85BB      		out 53-0x20,r24
  99               	.LM18:
 100 0050 8FEF      		ldi r24,lo8(-1)
 101 0052 82BB      		out 50-0x20,r24
 102               	.LM19:
 103 0054 81EE      		ldi r24,lo8(-31)
 104 0056 83B9      		out 35-0x20,r24
 105               	.LM20:
 106 0058 87EF      		ldi r24,lo8(-9)
 107 005a 8093 6500 		sts 101,r24
 108               	/* epilogue: frame size=0 */
 109 005e 0895      		ret
 110               	/* epilogue end (size=1) */
 111               	/* function setup_hw size 23 (22) */
 112               	.LFE11:
 114               		.data
 115               	.LC0:
 116 0000 092D 426F 		.string	"\t-Bootloader address "
 116      6F74 6C6F 
 116      6164 6572 
 116      2061 6464 
 116      7265 7373 
 117               	.LC1:
 118 0016 0D0A 00   		.string	"\r\n"
 119               		.text
 120               	.global	boot_addr
 122               	boot_addr:
 123               	.LFB9:
 124               	.LM21:
 125               	/* prologue: frame size=0 */
 126               	/* prologue end (size=0) */
 127               	.LM22:
 128 0060 80E0      		ldi r24,lo8(.LC0)
 129 0062 90E0      		ldi r25,hi8(.LC0)
 130 0064 0E94 0000 		call CONSOLE_puts
 131               	.LM23:
 132 0068 8091 0000 		lds r24,boot_version
 133 006c 9091 0000 		lds r25,(boot_version)+1
 134 0070 0E94 0000 		call printWord
 135               	.LM24:
 136 0074 80E0      		ldi r24,lo8(.LC1)
 137 0076 90E0      		ldi r25,hi8(.LC1)
 138 0078 0E94 0000 		call CONSOLE_puts
 139               	/* epilogue: frame size=0 */
 140 007c 0895      		ret
 141               	/* epilogue end (size=1) */
 142               	/* function boot_addr size 15 (14) */
 143               	.LFE9:
 145               		.data
 146               	.LC2:
 147 0019 4E49 4320 		.string	"NIC initialization failure."
 147      696E 6974 
 147      6961 6C69 
 147      7A61 7469 
 147      6F6E 2066 
 148               		.text
 149               	.global	nic_intialize
 151               	nic_intialize:
 152               	.LFB13:
 153               	.LM25:
 154               	/* prologue: frame size=0 */
 155               	/* prologue end (size=0) */
 156               	.LM26:
 157 007e AA98      		cbi 53-0x20,2
 158               	.LM27:
 159 0080 88EC      		ldi r24,lo8(200)
 160 0082 90E0      		ldi r25,hi8(200)
 161 0084 0E94 0000 		call TIMER_Wait_Tick
 162               	.LM28:
 163 0088 AA9A      		sbi 53-0x20,2
 164               	.LM29:
 165 008a 82E3      		ldi r24,lo8(50)
 166 008c 90E0      		ldi r25,hi8(50)
 167 008e 0E94 0000 		call TIMER_Wait_Tick
 168               	.LM30:
 169 0092 8DE0      		ldi r24,lo8(13)
 170 0094 81BD      		out 65-0x20,r24
 171 0096 00C0      		rjmp .L14
 172               	.L15:
 173               	.LM31:
 174 0098 80E0      		ldi r24,lo8(.LC2)
 175 009a 90E0      		ldi r25,hi8(.LC2)
 176 009c 0E94 0000 		call CONSOLE_puts
 177               	.LM32:
 178 00a0 84E6      		ldi r24,lo8(100)
 179 00a2 90E0      		ldi r25,hi8(100)
 180 00a4 0E94 0000 		call TIMER_Wait_Tick
 181               	.L14:
 182               	.LM33:
 183 00a8 0E94 0000 		call nicInit
 184 00ac 8F3F      		cpi r24,lo8(-1)
 185 00ae 01F0      		breq .L15
 186               	.LM34:
 187 00b0 8DE1      		ldi r24,lo8(29)
 188 00b2 81BD      		out 65-0x20,r24
 189               	.LM35:
 190 00b4 85E0      		ldi r24,lo8(5)
 191 00b6 81BD      		out 65-0x20,r24
 192               	.LM36:
 193 00b8 80E0      		ldi r24,lo8(mm+15)
 194 00ba 90E0      		ldi r25,hi8(mm+15)
 195 00bc 0E94 0000 		call nicSetMacAddress
 196               	.LM37:
 197 00c0 0E94 0000 		call arpInit
 198               	.LM38:
 199 00c4 0E94 0000 		call ipConfig
 200               	.LM39:
 201 00c8 88EC      		ldi r24,lo8(200)
 202 00ca 90E0      		ldi r25,hi8(200)
 203 00cc 0E94 0000 		call TIMER_Wait_Tick
 204               	/* epilogue: frame size=0 */
 205 00d0 0895      		ret
 206               	/* epilogue end (size=1) */
 207               	/* function nic_intialize size 42 (41) */
 208               	.LFE13:
 210               		.data
 211               	.LC3:
 212 0035 754E 6574 		.ascii	"uNetEthernet, Emb"
 212      4574 6865 
 212      726E 6574 
 212      2C20 456D 
 212      62
 213 0046 6564 6465 		.string	"edded Internet TCP/IP stack over Ethernet, Beta - Version 0.6c\r\n"
 213      6420 496E 
 213      7465 726E 
 213      6574 2054 
 213      4350 2F49 
 214               	.LC4:
 215 0087 092D 4265 		.string	"\t-Beta Version build on Mar 26 2010 at 13:35:27\r\n"
 215      7461 2056 
 215      6572 7369 
 215      6F6E 2062 
 215      7569 6C64 
 216               	.LC5:
 217 00b9 092D 426F 		.string	"\t-Bootloader Version "
 217      6F74 6C6F 
 217      6164 6572 
 217      2056 6572 
 217      7369 6F6E 
 218               		.text
 219               	.global	main
 221               	main:
 222               	.LFB14:
 223               	.LM40:
 224               	/* prologue: frame size=0 */
 225               	/* prologue end (size=0) */
 226               	.LM41:
 227 00d2 0E94 0000 		call setup_hw
 228               	.LM42:
 229 00d6 0E94 0000 		call TIMER_Init
 230               	.LM43:
 231 00da AA9A      		sbi 53-0x20,2
 232               	.LM44:
 233               	/* #APP */
 234 00dc 7894      		sei
 235               	.LM45:
 236               	/* #NOAPP */
 237 00de C598      		cbi 56-0x20,5
 238               	.LM46:
 239 00e0 C698      		cbi 56-0x20,6
 240               	.LM47:
 241 00e2 84E1      		ldi r24,lo8(20)
 242 00e4 90E0      		ldi r25,hi8(20)
 243 00e6 0E94 0000 		call TIMER_Wait_Tick
 244               	.LM48:
 245 00ea 81E0      		ldi r24,lo8(1)
 246 00ec 0E94 0000 		call global_init
 247               	.LM49:
 248 00f0 C598      		cbi 56-0x20,5
 249               	.LM50:
 250 00f2 84E1      		ldi r24,lo8(20)
 251 00f4 90E0      		ldi r25,hi8(20)
 252 00f6 0E94 0000 		call TIMER_Wait_Tick
 253               	.LM51:
 254 00fa 8091 0000 		lds r24,mm+6
 255 00fe 87FF      		sbrs r24,7
 256 0100 00C0      		rjmp .L19
 257               	.LM52:
 258 0102 0E94 0000 		call autobaud_setup
 259               	.LVL5:
 260               	.LM53:
 261 0106 8093 0000 		sts mm+7,r24
 262 010a 00C0      		rjmp .L21
 263               	.LVL6:
 264               	.L19:
 265               	.LM54:
 266 010c 8091 0000 		lds r24,mm+7
 267 0110 9927      		clr r25
 268               	.LVL7:
 269               	.L21:
 270               	.LM55:
 271 0112 0E94 0000 		call CONSOLE_init
 272               	.LVL8:
 273               	.LM56:
 274 0116 C598      		cbi 56-0x20,5
 275               	.LM57:
 276 0118 C698      		cbi 56-0x20,6
 277               	.LM58:
 278 011a 8091 6500 		lds r24,101
 279 011e 8860      		ori r24,lo8(8)
 280 0120 8093 6500 		sts 101,r24
 281               	.LM59:
 282 0124 8091 0000 		lds r24,mm
 283 0128 85FF      		sbrs r24,5
 284 012a 00C0      		rjmp .L22
 285               	.LM60:
 286 012c 84E1      		ldi r24,lo8(20)
 287 012e 90E0      		ldi r25,hi8(20)
 288 0130 0E94 0000 		call TIMER_Wait_Tick
 289               	.LM61:
 290 0134 80E0      		ldi r24,lo8(.LC3)
 291 0136 90E0      		ldi r25,hi8(.LC3)
 292 0138 0E94 0000 		call CONSOLE_puts
 293               	.LM62:
 294 013c 80E0      		ldi r24,lo8(.LC4)
 295 013e 90E0      		ldi r25,hi8(.LC4)
 296 0140 0E94 0000 		call CONSOLE_puts
 297               	.L22:
 298               	.LM63:
 299 0144 84E1      		ldi r24,lo8(20)
 300 0146 90E0      		ldi r25,hi8(20)
 301 0148 0E94 0000 		call TIMER_Wait_Tick
 302               	.LM64:
 303 014c 8091 0000 		lds r24,mm
 304 0150 85FF      		sbrs r24,5
 305 0152 00C0      		rjmp .L24
 306               	.LM65:
 307 0154 80E0      		ldi r24,lo8(.LC5)
 308 0156 90E0      		ldi r25,hi8(.LC5)
 309 0158 0E94 0000 		call CONSOLE_puts
 310               	.LM66:
 311 015c E091 0000 		lds r30,boot_version
 312 0160 F091 0000 		lds r31,(boot_version)+1
 313 0164 0995      		icall
 314               	.LM67:
 315 0166 0E94 0000 		call printWord
 316               	.LM68:
 317 016a 80E0      		ldi r24,lo8(.LC1)
 318 016c 90E0      		ldi r25,hi8(.LC1)
 319 016e 0E94 0000 		call CONSOLE_puts
 320               	.L24:
 321               	.LM69:
 322 0172 0E94 0000 		call MEM_init
 323               	.LM70:
 324 0176 0E94 0000 		call nic_intialize
 325               	.LM71:
 326 017a 0E94 0000 		call irCommands
 327               	.LM72:
 328 017e 80E0      		ldi r24,lo8(0)
 329 0180 90E0      		ldi r25,hi8(0)
 330               	/* epilogue: frame size=0 */
 331 0182 0895      		ret
 332               	/* epilogue end (size=1) */
 333               	/* function main size 90 (89) */
 334               	.LFE14:
 336               	.global	poll_serial
 338               	poll_serial:
 339               	.LFB12:
 340               	.LM73:
 341               	/* prologue: frame size=6 */
 342 0184 0F93      		push r16
 343 0186 1F93      		push r17
 344 0188 CF93      		push r28
 345 018a DF93      		push r29
 346 018c CDB7      		in r28,__SP_L__
 347 018e DEB7      		in r29,__SP_H__
 348 0190 2697      		sbiw r28,6
 349 0192 0FB6      		in __tmp_reg__,__SREG__
 350 0194 F894      		cli
 351 0196 DEBF      		out __SP_H__,r29
 352 0198 0FBE      		out __SREG__,__tmp_reg__
 353 019a CDBF      		out __SP_L__,r28
 354               	/* prologue end (size=12) */
 355               	.LM74:
 356 019c 8091 0000 		lds r24,poll_semi
 357 01a0 8823      		tst r24
 358 01a2 01F0      		breq .+2
 359 01a4 00C0      		rjmp .L44
 360               	.LM75:
 361 01a6 81E0      		ldi r24,lo8(1)
 362 01a8 8093 0000 		sts poll_semi,r24
 363               	.LM76:
 364 01ac CE01      		movw r24,r28
 365 01ae 0196      		adiw r24,1
 366 01b0 0E94 0000 		call nicGetMacAddress
 367               	.L50:
 368               	.LM77:
 369 01b4 60E0      		ldi r22,lo8(rx_pkt)
 370 01b6 70E0      		ldi r23,hi8(rx_pkt)
 371 01b8 8CEB      		ldi r24,lo8(700)
 372 01ba 92E0      		ldi r25,hi8(700)
 373 01bc 0E94 0000 		call nicPoll
 374 01c0 8C01      		movw r16,r24
 375               	.LM78:
 376 01c2 892B      		or r24,r25
 377 01c4 01F0      		breq .L31
 378               	.LM79:
 379 01c6 8091 0000 		lds r24,rx_pkt
 380 01ca 8F3F      		cpi r24,lo8(-1)
 381 01cc 01F4      		brne .L33
 382 01ce 8091 0000 		lds r24,rx_pkt+1
 383 01d2 8F3F      		cpi r24,lo8(-1)
 384 01d4 01F4      		brne .L33
 385 01d6 8091 0000 		lds r24,rx_pkt+2
 386 01da 8F3F      		cpi r24,lo8(-1)
 387 01dc 01F4      		brne .L33
 388 01de 8091 0000 		lds r24,rx_pkt+3
 389 01e2 8F3F      		cpi r24,lo8(-1)
 390 01e4 01F4      		brne .L33
 391 01e6 8091 0000 		lds r24,rx_pkt+4
 392 01ea 8F3F      		cpi r24,lo8(-1)
 393 01ec 01F4      		brne .L33
 394 01ee 8091 0000 		lds r24,rx_pkt+5
 395 01f2 8F3F      		cpi r24,lo8(-1)
 396 01f4 01F0      		breq .L39
 397               	.L33:
 398 01f6 46E0      		ldi r20,lo8(6)
 399 01f8 50E0      		ldi r21,hi8(6)
 400 01fa BE01      		movw r22,r28
 401 01fc 6F5F      		subi r22,lo8(-(1))
 402 01fe 7F4F      		sbci r23,hi8(-(1))
 403 0200 80E0      		ldi r24,lo8(rx_pkt)
 404 0202 90E0      		ldi r25,hi8(rx_pkt)
 405 0204 0E94 0000 		call memcmp
 406 0208 892B      		or r24,r25
 407 020a 01F4      		brne .L50
 408               	.L39:
 409               	.LM80:
 410 020c 8091 0000 		lds r24,rx_pkt+12
 411 0210 8830      		cpi r24,lo8(8)
 412 0212 01F4      		brne .L50
 413               	.LM81:
 414 0214 8091 0000 		lds r24,rx_pkt+13
 415 0218 8823      		tst r24
 416 021a 01F4      		brne .L41
 417               	.LM82:
 418 021c 0E50      		subi r16,lo8(-(-14))
 419 021e 1040      		sbci r17,hi8(-(-14))
 420 0220 B801      		movw r22,r16
 421 0222 80E0      		ldi r24,lo8(rx_pkt+14)
 422 0224 90E0      		ldi r25,hi8(rx_pkt+14)
 423 0226 0E94 0000 		call ip_upcall
 424 022a 00C0      		rjmp .L50
 425               	.L41:
 426               	.LM83:
 427 022c 8630      		cpi r24,lo8(6)
 428 022e 01F4      		brne .L50
 429               	.LM84:
 430 0230 B801      		movw r22,r16
 431 0232 80E0      		ldi r24,lo8(rx_pkt)
 432 0234 90E0      		ldi r25,hi8(rx_pkt)
 433 0236 0E94 0000 		call arpHandler
 434 023a 00C0      		rjmp .L50
 435               	.L31:
 436               	.LM85:
 437 023c 1092 0000 		sts poll_semi,__zero_reg__
 438               	.L44:
 439               	/* epilogue: frame size=6 */
 440 0240 2696      		adiw r28,6
 441 0242 0FB6      		in __tmp_reg__,__SREG__
 442 0244 F894      		cli
 443 0246 DEBF      		out __SP_H__,r29
 444 0248 0FBE      		out __SREG__,__tmp_reg__
 445 024a CDBF      		out __SP_L__,r28
 446 024c DF91      		pop r29
 447 024e CF91      		pop r28
 448 0250 1F91      		pop r17
 449 0252 0F91      		pop r16
 450 0254 0895      		ret
 451               	/* epilogue end (size=11) */
 452               	/* function poll_serial size 105 (82) */
 453               	.LFE12:
 455               	.global	boot_version
 456               		.data
 459               	boot_version:
 460 00cf 0370      		.word	28675
 461               	.global	crc_boot
 464               	crc_boot:
 465 00d1 0670      		.word	28678
 466               	.global	bootloader
 469               	bootloader:
 470 00d3 0070      		.word	28672
 471               	.global	absolute
 474               	absolute:
 475 00d5 0001      		.word	256
 476               	.global	poll_semi
 477               	.global	poll_semi
 478               		.section .bss
 481               	poll_semi:
 482 0000 00        		.skip 1,0
 483               		.comm smbuff,16,1
 484               		.comm smbuff1,25,1
 485               		.comm smbuff2,25,1
 550               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 emain.c
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:3      *ABS*:0000003f __SREG__
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:4      *ABS*:0000003e __SP_H__
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:5      *ABS*:0000003d __SP_L__
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:6      *ABS*:00000000 __tmp_reg__
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:7      *ABS*:00000001 __zero_reg__
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:20     .text:00000000 bytecopy
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:72     .text:00000032 setup_hw
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:122    .text:00000060 boot_addr
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:459    .data:000000cf boot_version
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:151    .text:0000007e nic_intialize
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:221    .text:000000d2 main
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:338    .text:00000184 poll_serial
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:481    .bss:00000000 poll_semi
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:464    .data:000000d1 crc_boot
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:469    .data:000000d3 bootloader
C:\DOCUME~1\mike\LOCALS~1\Temp/ccRweB8I.s:474    .data:000000d5 absolute
                            *COM*:00000010 smbuff
                            *COM*:00000019 smbuff1
                            *COM*:00000019 smbuff2

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
CONSOLE_puts
printWord
TIMER_Wait_Tick
nicInit
mm
nicSetMacAddress
arpInit
ipConfig
TIMER_Init
global_init
autobaud_setup
CONSOLE_init
MEM_init
irCommands
nicGetMacAddress
rx_pkt
nicPoll
memcmp
ip_upcall
arpHandler
